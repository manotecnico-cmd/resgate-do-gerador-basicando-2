<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <title>Resgate do Gerador ‚Äì Fase 2 (Basicando 2) v1.0.0</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #020617;
      color: #e5e7eb;
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
      margin: 0;
    }
    .game-container {
      background: radial-gradient(circle at top, #1e293b, #020617 55%);
      border-radius: 20px;
      padding: 24px 20px;
      max-width: 520px;
      width: 92%;
      box-shadow: 0 20px 40px rgba(0, 0, 0, 0.7);
      border: 1px solid #1f2937;
    }
    h1 {
      font-size: 1.5rem;
      margin-top: 0;
      margin-bottom: 8px;
      color: #38bdf8;
      text-align: center;
    }
    h2 {
      font-size: 1.1rem;
      margin: 0 0 8px 0;
      text-align: center;
      color: #e5e7eb;
    }
    .subtitle {
      font-size: 0.85rem;
      color: #9ca3af;
      margin-bottom: 12px;
      text-align: center;
    }
    .badge {
      font-size: 0.7rem;
      text-transform: uppercase;
      letter-spacing: 0.12em;
      color: #fbbf24;
      text-align: center;
      margin-bottom: 6px;
    }
    .disclaimer {
      font-size: 0.75rem;
      color: #9ca3af;
      text-align: center;
      margin-bottom: 16px;
    }
    .question {
      margin-bottom: 16px;
      font-size: 1rem;
      line-height: 1.4;
    }
    .options {
      display: flex;
      flex-direction: column;
      gap: 8px;
      margin-bottom: 16px;
    }
    button.option-btn {
      padding: 10px 12px;
      border-radius: 999px;
      border: none;
      cursor: pointer;
      background: #0b1120;
      color: #e5e7eb;
      text-align: left;
      transition: transform 0.08s ease, box-shadow 0.08s ease, background 0.1s;
      font-size: 0.95rem;
      border: 1px solid #1f2937;
    }
    button.option-btn:hover {
      transform: translateY(-1px);
      box-shadow: 0 8px 16px rgba(0,0,0,0.6);
      background: #111827;
    }
    button.option-btn:active {
      transform: translateY(0);
      box-shadow: none;
    }
    .feedback {
      min-height: 40px;
      font-size: 0.9rem;
      margin-bottom: 12px;
    }
    .score {
      font-size: 0.9rem;
      color: #a5b4fc;
      margin-bottom: 8px;
    }
    .mentor {
      font-size: 0.85rem;
      color: #facc15;
      margin-bottom: 8px;
    }

    .btn-primary {
      display: inline-block;
      padding: 10px 18px;
      border-radius: 999px;
      background: #38bdf8;
      color: #020617;
      border: none;
      cursor: pointer;
      font-weight: bold;
      font-size: 0.95rem;
      transition: background 0.1s, transform 0.08s, box-shadow 0.08s;
      text-align: center;
      width: 100%;
      margin-top: 8px;
    }
    .btn-primary:hover {
      background: #0ea5e9;
      transform: translateY(-1px);
      box-shadow: 0 8px 16px rgba(0,0,0,0.5);
    }
    .btn-primary:active {
      transform: translateY(0);
      box-shadow: none;
    }
    .btn-ghost {
      display: inline-block;
      padding: 8px 14px;
      border-radius: 999px;
      background: transparent;
      color: #9ca3af;
      border: 1px solid #1f2937;
      cursor: pointer;
      font-size: 0.85rem;
      transition: background 0.1s, color 0.1s, transform 0.08s;
      width: 100%;
      margin-top: 6px;
    }
    .btn-ghost:hover {
      background: #020617;
      color: #e5e7eb;
      transform: translateY(-1px);
    }
    .tagline {
      font-size: 0.8rem;
      color: #6b7280;
      margin-top: 10px;
      text-align: center;
    }
    .small {
      font-size: 0.8rem;
    }
    .mt-8 { margin-top: 8px; }
    .mt-16 { margin-top: 16px; }
    .highlight { color: #38bdf8; font-weight: bold; }
/* BASE ‚Äì vale para todos */
.mascote-fixed{
  position: fixed;
  z-index: 50;
  pointer-events: none;
  user-select: none;
  opacity: 0.95;
}

/* DESKTOP */
@media (min-width: 1025px){
  .mascote-fixed{
    width: 190px;
    top: 120px;
    right: 120px;
  }
}

/* TABLET */
@media (min-width: 601px) and (max-width: 1024px){
  .mascote-fixed{
    width: 170px;
    top: 120px;
    right: 20px;
  }
}

/* CELULAR ‚Äî SEMPRE O √öLTIMO */
@media (max-width: 600px){
  .mascote-fixed{
    width: 95px;
    right: 8px;
    bottom: 12px;
    top: auto;
    opacity: 0.9;
  }
}



  </style>
</head>
<body>
<img class="mascote-fixed" src="assets/maninho.png" alt="Maninho" />

  <div class="game-container">

    <!-- MENU -->
    <div id="menuScreen">
      <h1>Resgate do Gerador</h1>
      <div class="badge">Fase 2 ¬∑ Basicando 2 ¬∑ b√°sico-intermedi√°rio</div>
      <div class="subtitle">
        Treino de decis√µes para quem j√° pegou o b√°sico e quer subir um degrau ‚Äî sem virar ‚Äúprova imposs√≠vel‚Äù.
      </div>
      <div class="disclaimer">
        Jogo educativo e experimental. N√£o substitui manuais, treinamentos oficiais
        ou procedimentos espec√≠ficos de fabricantes. Use como apoio e divers√£o t√©cnica.
      </div>

      <button class="btn-primary" onclick="startGame()">
        Come√ßar plant√£o (Fase 2)
      </button>

      <button class="btn-ghost" onclick="showCredits()">
        Ver cr√©ditos
      </button>

      <div class="tagline">
        Infinita Geradores ¬∑ Fase 2 (Basicando 2) ¬∑ v1.0.0
      </div>
    </div>

    <!-- JOGO -->
    <div id="gameScreen" style="display:none;">
      <div class="mentor" id="mentorBox"></div>
      <div class="score" id="score"></div>
      <div class="question" id="question"></div>
      <div class="options" id="options"></div>
      <div class="feedback" id="feedback"></div>

      <button class="btn-primary" id="nextBtn" style="display:none;">Pr√≥xima ocorr√™ncia</button>
      <button class="btn-ghost" id="retryBtn" style="display:none;">Tentar novamente esta ocorr√™ncia</button>
      <button class="btn-ghost" onclick="backToMenu()">Voltar ao menu</button>
    </div>

    <!-- FINAL -->
    <div id="endScreen" style="display:none;">
      <h2>Fim do plant√£o</h2>
      <p id="finalMessage"></p>
      <p class="small mt-8" id="finalScore"></p>
      <button class="btn-primary" onclick="restartGame()">
        Jogar de novo
      </button>
      <button class="btn-ghost" onclick="backToMenu()">
        Voltar ao menu
      </button>
      <div class="tagline mt-16">
        Em breve: fases avan√ßadas (sem deixar imposs√≠vel pra novato).
      </div>
    </div>

    <!-- CR√âDITOS -->
    <div id="creditsScreen" style="display:none;">
      <h2>Cr√©ditos</h2>
      <p class="small">
        Conceito, vis√£o e pr√°tica de campo: <span class="highlight">Mano ‚Äì Infinita Geradores</span>.<br/>
        IA parceira de plant√£o: <span class="highlight">Akamai</span>.<br/>
        Mentor ‚Äúcasca-grossa‚Äù: <span class="highlight">Germano</span>.
      </p>
      <p class="small mt-8">
        Fase 2: perguntas mais puxadas que o b√°sico, mas ainda acess√≠veis para quem est√° come√ßando a pegar ritmo.
      </p>
      <button class="btn-ghost mt-16" onclick="backToMenu()">
        Voltar ao menu
      </button>
    </div>

  </div>

  <script>
    // =========================
    // PERGUNTAS ‚Äì FASE 2 (BASICANDO 2)
    // =========================
    // OBS: Eu converti suas op√ß√µes A/B/C/D para o formato do jogo (array), sem quebrar nada.
    const questions = [
      {
        text: "Um gerador entra em opera√ß√£o, mas a tens√£o oscila levemente ap√≥s alguns minutos. Qual √© a PRIMEIRA verifica√ß√£o recomendada?",
        options: [
          { text: "Substituir imediatamente o AVR", correct: false, feedback: "Calma. Trocar pe√ßa direto √© chute caro. Primeiro descarte o b√°sico." },
          { text: "Verificar conex√µes el√©tricas e aperto dos terminais", correct: true, feedback: "Correto. Oscila√ß√£o leve muitas vezes √© mau contato, terminal frouxo ou conex√£o aquecendo." },
          { text: "Trocar o disjuntor de sa√≠da", correct: false, feedback: "Pode falhar, mas n√£o √© a primeira suspeita para oscila√ß√£o de tens√£o." },
          { text: "Desligar o gerador e aguardar resfriamento", correct: false, feedback: "Resfriar n√£o resolve causa el√©trica. Primeiro verifique conex√µes e medi√ß√µes." }
        ]
      },
      {
        text: "Durante uma partida de emerg√™ncia, o gerador demora mais que o normal para pegar. Qual fator pode causar esse sintoma?",
        options: [
          { text: "Falta de aterramento", correct: false, feedback: "Aterramento √© importante, mas n√£o costuma causar demora de partida do motor." },
          { text: "Combust√≠vel contaminado ou ar no sistema", correct: true, feedback: "Correto. Ar na linha, filtro sujo ou diesel contaminado atrapalham a pega." },
          { text: "Excesso de carga no quadro de sa√≠da", correct: false, feedback: "A carga influencia depois, mas demora pra pegar √© mais ligado a partida/combust√≠vel." },
          { text: "Ajuste incorreto do disjuntor", correct: false, feedback: "Disjuntor n√£o √© causa comum de demora pra motor entrar em combust√£o." }
        ]
      },
      {
        text: "O motor do gerador est√° funcionando bem, mas n√£o h√° tens√£o na sa√≠da. Qual item deve ser verificado primeiro?",
        options: [
          { text: "Filtro de ar", correct: false, feedback: "Filtro de ar afeta desempenho do motor, n√£o a gera√ß√£o de tens√£o diretamente." },
          { text: "N√≠vel do √≥leo lubrificante", correct: false, feedback: "√ìleo √© essencial, mas aqui o problema √© el√©trico: sem tens√£o na sa√≠da." },
          { text: "Excita√ß√£o / sistema de gera√ß√£o", correct: true, feedback: "Correto. Primeiro alvo: excita√ß√£o/AVR/sensing/disjuntor do gerador." },
          { text: "Radiador", correct: false, feedback: "Arrefecimento n√£o √© a causa mais prov√°vel de ‚Äúmotor ok e zero tens√£o‚Äù." }
        ]
      },
      {
        text: "Ao assumir carga, o gerador apresenta queda brusca de rota√ß√£o. O que isso normalmente indica?",
        options: [
          { text: "Falha no sistema de combust√≠vel", correct: false, feedback: "Pode acontecer, mas o mais comum em queda brusca √© carga alta de uma vez." },
          { text: "Excesso de carga aplicada", correct: true, feedback: "Correto. Queda brusca sugere carga acima do que o conjunto consegue segurar no momento." },
          { text: "Problema no painel de controle", correct: false, feedback: "Painel pode influenciar, mas o sintoma descrito bate mais com sobrecarga." },
          { text: "Baixa temperatura ambiente", correct: false, feedback: "Temperatura ambiente n√£o costuma causar queda brusca de rota√ß√£o ao assumir carga." }
        ]
      },
      {
        text: "Qual pr√°tica ajuda a evitar falhas inesperadas em geradores de emerg√™ncia?",
        options: [
          { text: "Operar apenas em emerg√™ncias reais", correct: false, feedback: "Se s√≥ liga em emerg√™ncia, voc√™ descobre defeito na pior hora." },
          { text: "Testes peri√≥dicos com carga controlada", correct: true, feedback: "Correto. Teste com carga controlada revela problemas antes da emerg√™ncia." },
          { text: "Manter o gerador sempre desligado", correct: false, feedback: "Gerador parado demais d√° problema (bateria, diesel, oxida√ß√£o, etc.)." },
          { text: "Trocar pe√ßas somente ap√≥s falha", correct: false, feedback: "Isso vira ‚Äúmanuten√ß√£o corretiva‚Äù e aumenta risco." }
        ]
      },
      {
        text: "O gerador funciona bem sem carga, mas apresenta instabilidade ao assumir carga. Qual verifica√ß√£o inicial √© mais indicada?",
        options: [
          { text: "Regulador de tens√£o", correct: false, feedback: "Pode ser, mas instabilidade em carga muitas vezes √© combust√≠vel/entrega de pot√™ncia." },
          { text: "Sistema de combust√≠vel", correct: true, feedback: "Correto. Em carga, falha de alimenta√ß√£o aparece: filtro, ar na linha, restri√ß√£o, etc." },
          { text: "Filtro de ar", correct: false, feedback: "Pode afetar, mas normalmente o combust√≠vel √© verificado antes." },
          { text: "Radiador", correct: false, feedback: "Radiador √© mais ligado a aquecimento, n√£o instabilidade imediata ao entrar em carga." }
        ]
      },
      {
        text: "Durante um teste semanal, o gerador n√£o entra automaticamente. Qual item deve ser verificado primeiro?",
        options: [
          { text: "N√≠vel de √≥leo", correct: false, feedback: "Importante, mas primeiro veja se est√° tudo configurado e autorizado para AUTO." },
          { text: "Configura√ß√£o do painel de controle", correct: true, feedback: "Correto. Verifique modo AUTO, hor√°rios, permissivas, entradas e l√≥gica do controlador." },
          { text: "Bateria do motor", correct: false, feedback: "Bateria entra no diagn√≥stico, mas primeiro confirme que houve comando de partida." },
          { text: "Disjuntor de sa√≠da", correct: false, feedback: "Disjuntor n√£o impede o gerador de tentar partir em teste semanal." }
        ]
      },
      {
        text: "O gerador entra em opera√ß√£o, mas desarma ap√≥s alguns minutos sem carga. Qual causa √© mais prov√°vel?",
        options: [
          { text: "Sobretens√£o", correct: false, feedback: "Pode ocorrer, mas sem carga o mais comum √© sensor/prote√ß√£o atuando por leitura errada." },
          { text: "Temperatura elevada", correct: false, feedback: "Sem carga, aquecimento forte √© menos prov√°vel (a n√£o ser defeito grave no arrefecimento)." },
          { text: "Falha de sensor ou prote√ß√£o", correct: true, feedback: "Correto. Sensor ruim, chicote, permissiva, ou prote√ß√£o mal ajustada derruba o gerador." },
          { text: "Falta de combust√≠vel", correct: false, feedback: "Pode ser, mas em poucos minutos sem carga costuma aparecer primeiro alarme/sensor/prote√ß√£o." }
        ]
      },
      {
        text: "Qual pr√°tica ajuda a preservar a vida √∫til do gerador?",
        options: [
          { text: "Operar sempre em carga m√°xima", correct: false, feedback: "Carga m√°xima sempre acelera desgaste. O ideal √© operar dentro do recomendado." },
          { text: "Evitar testes frequentes", correct: false, feedback: "Testes s√£o essenciais ‚Äî o que importa √© fazer do jeito certo." },
          { text: "Manter manuten√ß√£o preventiva em dia", correct: true, feedback: "Correto. Preventiva e testes bem feitos = gerador confi√°vel." },
          { text: "Usar combust√≠vel de qualquer proced√™ncia", correct: false, feedback: "Diesel ruim √© caminho curto pra dor de cabe√ßa (borra, entupimento, falha)." }
        ]
      },
      {
        text: "Um gerador apresenta fuma√ßa escura durante a opera√ß√£o. O que isso normalmente indica?",
        options: [
          { text: "Baixa compress√£o", correct: false, feedback: "Pode causar outros sintomas, mas fuma√ßa preta geralmente √© excesso de combust√≠vel/queima ruim." },
          { text: "Mistura rica / excesso de combust√≠vel", correct: true, feedback: "Correto. Fuma√ßa escura costuma indicar excesso de combust√≠vel ou falta de ar suficiente." },
          { text: "Falha el√©trica", correct: false, feedback: "Falha el√©trica n√£o √© a causa t√≠pica de fuma√ßa preta do motor." },
          { text: "Falta de √°gua no radiador", correct: false, feedback: "Falta de √°gua tende a causar aquecimento, n√£o fuma√ßa preta diretamente." }
        ]
      },
      {
        text: "Qual item √© essencial para partidas confi√°veis em emerg√™ncia?",
        options: [
          { text: "Disjuntor reserva", correct: false, feedback: "Pode ajudar, mas n√£o garante partida." },
          { text: "Bateria em bom estado", correct: true, feedback: "Correto. Sem bateria boa e carregador ok, n√£o tem emerg√™ncia que salve." },
          { text: "Filtro de combust√≠vel novo", correct: false, feedback: "Ajuda, mas a bateria √© o b√°sico do b√°sico para partir." },
          { text: "Silenciador limpo", correct: false, feedback: "Importante, mas n√£o √© o essencial para partida confi√°vel." }
        ]
      },
      {
        text: "Antes de realizar manuten√ß√£o no gerador, a primeira a√ß√£o deve ser:",
        options: [
          { text: "Abrir o painel", correct: false, feedback: "Abrir painel sem seguran√ßa √© risco." },
          { text: "Desligar o disjuntor de sa√≠da", correct: false, feedback: "√â parte do processo, mas antes disso vem o isolamento e seguran√ßa geral." },
          { text: "Garantir isolamento e seguran√ßa do equipamento", correct: true, feedback: "Correto. Seguran√ßa primeiro: isolamento, bloqueio, sinaliza√ß√£o, EPIs." },
          { text: "Drenar o combust√≠vel", correct: false, feedback: "N√£o √© a primeira a√ß√£o. Seguran√ßa vem antes." }
        ]
      },
      {
        text: "O painel indica falha de comunica√ß√£o, mas o motor est√° funcionando. O que verificar primeiro?",
        options: [
          { text: "Sistema de arrefecimento", correct: false, feedback: "Arrefecimento n√£o √© causa direta de falha de comunica√ß√£o do painel." },
          { text: "Chicotes e conex√µes do painel", correct: true, feedback: "Correto. Conex√µes soltas, alimenta√ß√£o fraca ou cabo de comunica√ß√£o d√£o esse sintoma." },
          { text: "N√≠vel de √≥leo", correct: false, feedback: "√ìleo √© vital, mas aqui o sintoma √© comunica√ß√£o, n√£o lubrifica√ß√£o." },
          { text: "Filtro de ar", correct: false, feedback: "Filtro de ar n√£o √© a causa t√≠pica de falha de comunica√ß√£o." }
        ]
      },
      {
        text: "Qual √© a principal fun√ß√£o do sistema de arrefecimento?",
        options: [
          { text: "Aumentar a pot√™ncia", correct: false, feedback: "Arrefecimento n√£o aumenta pot√™ncia; ele mant√©m o motor dentro da faixa segura." },
          { text: "Reduzir o consumo", correct: false, feedback: "Pode influenciar indiretamente, mas n√£o √© a fun√ß√£o principal." },
          { text: "Manter a temperatura adequada de opera√ß√£o", correct: true, feedback: "Correto. Arrefecimento mant√©m o motor vivo e est√°vel." },
          { text: "Melhorar a tens√£o el√©trica", correct: false, feedback: "Tens√£o el√©trica √© fun√ß√£o de excita√ß√£o/AVR, n√£o do arrefecimento." }
        ]
      },
      {
        text: "Um gerador parado por longos per√≠odos pode apresentar:",
        options: [
          { text: "Melhor desempenho", correct: false, feedback: "Parado demais geralmente piora." },
          { text: "Menor desgaste", correct: false, feedback: "Pode at√© reduzir horas, mas aumenta riscos (bateria, diesel, corros√£o)." },
          { text: "Problemas de bateria e combust√≠vel", correct: true, feedback: "Correto. Bateria descarrega, diesel envelhece, e o sistema cria surpresa." },
          { text: "Nenhuma altera√ß√£o", correct: false, feedback: "Sempre altera alguma coisa com o tempo, principalmente bateria/diesel." }
        ]
      },
      {
        text: "Durante a opera√ß√£o, vibra√ß√£o excessiva pode indicar:",
        options: [
          { text: "Falta de carga", correct: false, feedback: "Vibra√ß√£o excessiva raramente √© s√≥ falta de carga." },
          { text: "Problemas mec√¢nicos ou de fixa√ß√£o", correct: true, feedback: "Correto. Coxins, base, alinhamento, folgas e partes soltas s√£o suspeitos." },
          { text: "Falha no AVR", correct: false, feedback: "AVR √© el√©trico. Vibra√ß√£o √© mais mec√¢nica." },
          { text: "Excesso de tens√£o", correct: false, feedback: "Excesso de tens√£o n√£o costuma gerar vibra√ß√£o mec√¢nica do conjunto." }
        ]
      },
      {
        text: "Qual teste simples ajuda a identificar problemas antes de uma emerg√™ncia?",
        options: [
          { text: "Teste apenas visual", correct: false, feedback: "Visual ajuda, mas sozinho n√£o prova que o conjunto segura carga." },
          { text: "Teste de partida sem carga", correct: false, feedback: "Ajuda, mas o que revela problema de verdade √© teste com carga." },
          { text: "Teste peri√≥dico com carga controlada", correct: true, feedback: "Correto. Esse √© o teste que separa ‚Äúparece ok‚Äù de ‚Äúest√° ok‚Äù." },
          { text: "Nenhum teste √© necess√°rio", correct: false, feedback: "Teste √© o que evita passar vergonha (ou desastre) na emerg√™ncia." }
        ]
      },
      {
        text: "O gerador apresenta ru√≠do anormal durante a opera√ß√£o. Qual atitude √© mais correta?",
        options: [
          { text: "Ignorar se estiver funcionando", correct: false, feedback: "Ru√≠do anormal √© aviso. Ignorar costuma virar preju√≠zo." },
          { text: "Aumentar a carga", correct: false, feedback: "Aumentar carga pode piorar e acelerar dano." },
          { text: "Investigar a causa antes de continuar operando", correct: true, feedback: "Correto. Diagnosticar primeiro evita quebrar feio." },
          { text: "Desligar permanentemente", correct: false, feedback: "N√£o √© sempre. Primeiro investigar e tomar decis√£o segura." }
        ]
      },
      {
        text: "Qual fator mais influencia a confiabilidade de um gerador de emerg√™ncia?",
        options: [
          { text: "Marca do equipamento", correct: false, feedback: "Ajuda, mas n√£o salva gerador mal cuidado." },
          { text: "Pintura externa", correct: false, feedback: "Pintura bonita n√£o faz o motor pegar." },
          { text: "Manuten√ß√£o preventiva e testes", correct: true, feedback: "Correto. Preventiva e teste bem feito = confiabilidade real." },
          { text: "Local de instala√ß√£o", correct: false, feedback: "Local influencia, mas sem manuten√ß√£o/testes n√£o adianta." }
        ]
      },
      {
        text: "Em caso de d√∫vida durante uma falha, o mais indicado √©:",
        options: [
          { text: "Tomar decis√µes r√°pidas sem an√°lise", correct: false, feedback: "Pressa sem an√°lise vira erro caro." },
          { text: "Seguir procedimentos e verificar o b√°sico", correct: true, feedback: "Correto. O b√°sico bem feito resolve metade das emerg√™ncias." },
          { text: "Ajustar par√¢metros aleatoriamente", correct: false, feedback: "Mexer aleat√≥rio piora e mascara a causa." },
          { text: "For√ßar o equipamento", correct: false, feedback: "For√ßar equipamento em emerg√™ncia √© receita pra quebrar de vez." }
        ]
      }
    ];

    // =========================
    // ESTADO DO JOGO
    // =========================
    let currentIndex = 0;
    let score = 0;
    let answered = false;

    const menuScreen = document.getElementById("menuScreen");
    const gameScreen = document.getElementById("gameScreen");
    const endScreen = document.getElementById("endScreen");
    const creditsScreen = document.getElementById("creditsScreen");

    const mentorBox = document.getElementById("mentorBox");
    const scoreEl = document.getElementById("score");
    const questionEl = document.getElementById("question");
    const optionsEl = document.getElementById("options");
    const feedbackEl = document.getElementById("feedback");
    const nextBtn = document.getElementById("nextBtn");
    const retryBtn = document.getElementById("retryBtn");
    const finalMessageEl = document.getElementById("finalMessage");
    const finalScoreEl = document.getElementById("finalScore");

    function setMentorMessage(text) {
      if (mentorBox) mentorBox.textContent = "üß¢ Germano: " + text;
    }

    // =========================
    // FUN√á√ïES DE TELA
    // =========================
    function showOnly(screen) {
      menuScreen.style.display = "none";
      gameScreen.style.display = "none";
      endScreen.style.display = "none";
      creditsScreen.style.display = "none";
      screen.style.display = "block";
    }

    function backToMenu() {
      showOnly(menuScreen);
    }

    function showCredits() {
      showOnly(creditsScreen);
    }

    // =========================
    // UTIL ‚Äì EMBARALHAR
    // =========================
    function shuffleArray(array) {
      const arr = [...array];
      for (let i = arr.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [arr[i], arr[j]] = [arr[j], arr[i]];
      }
      return arr;
    }

    // =========================
    // L√ìGICA DO JOGO
    // =========================
    function startGame() {
      currentIndex = 0;
      score = 0;
      answered = false;
      showOnly(gameScreen);
      setMentorMessage("Fase 2 na √°rea. Aqui j√° come√ßa a ficar s√©rio, mas sem virar imposs√≠vel. L√™ com calma.");
      loadQuestion();
    }

    function restartGame() {
      startGame();
    }

    function updateScore() {
      const total = questions.length;
      scoreEl.textContent = "Ocorr√™ncia " + (currentIndex + 1) + " de " + total + " ‚Ä¢ Pontos: " + score;
    }

    function loadQuestion() {
      answered = false;
      feedbackEl.textContent = "";
      nextBtn.style.display = "none";
      if (retryBtn) retryBtn.style.display = "none";

      const total = questions.length;
      const numero = currentIndex + 1;
      setMentorMessage("Ocorr√™ncia " + numero + " de " + total + ". Pensa como plant√£o de verdade, sem chute.");

      const q = questions[currentIndex];
      questionEl.textContent = q.text;
      optionsEl.innerHTML = "";

      const indices = q.options.map((_, i) => i);
      const shuffled = shuffleArray(indices);

      shuffled.forEach((idx) => {
        const opt = q.options[idx];
        const btn = document.createElement("button");
        btn.className = "option-btn";
        btn.textContent = opt.text;
        btn.onclick = function () {
          selectOption(idx);
        };
        optionsEl.appendChild(btn);
      });

      updateScore();
    }

    function selectOption(index) {
      if (answered) return;

      const q = questions[currentIndex];
      const chosen = q.options[index];
      answered = true;

      if (chosen.correct) {
        score++;
        feedbackEl.textContent = "‚úÖ " + (chosen.feedback || "Boa. Decis√£o correta.");
        setMentorMessage("A√≠ sim. Essa √© a linha de racioc√≠nio que evita preju√≠zo.");
        nextBtn.style.display = "inline-block";
        if (retryBtn) retryBtn.style.display = "none";
      } else {
        feedbackEl.textContent = "‚ùå " + (chosen.feedback || "Quase. Revisa o b√°sico e tenta de novo.");
        setMentorMessage("Quase. Em emerg√™ncia, primeiro faz o simples bem feito.");
        if (retryBtn) retryBtn.style.display = "inline-block";
        nextBtn.style.display = "none";
      }

      updateScore();
    }

    function endGame() {
      showOnly(endScreen);
      const total = questions.length;
      let mensagem;

      if (score === total) {
        mensagem = "Plant√£o perfeito! Fase 2 conclu√≠da sem escorregar.";
      } else if (score > total / 2) {
        mensagem = "Bom desempenho. Voc√™ j√° t√° pegando o ritmo do racioc√≠nio de plant√£o.";
      } else {
        mensagem = "Abaixo do ideal. Repete a Fase 2 e treina o ‚Äòb√°sico bem feito‚Äô at√© ficar autom√°tico.";
      }

      finalMessageEl.textContent = mensagem + " ‚Äî Germano.";
      finalScoreEl.textContent = "Pontua√ß√£o final: " + score + " de " + total + " ocorr√™ncias.";
      setMentorMessage("Plant√£o encerrado. Quando quiser, eu puxo a Fase 3.");
    }

    nextBtn.addEventListener("click", function () {
      currentIndex++;
      if (currentIndex < questions.length) {
        loadQuestion();
      } else {
        endGame();
      }
    });

    if (retryBtn) {
      retryBtn.addEventListener("click", function () {
        loadQuestion();
      });
    }

    showOnly(menuScreen);
  </script>
</body>
</html>
